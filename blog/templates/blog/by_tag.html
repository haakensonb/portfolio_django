{% extends "blog/base.html" %}
{% load markdown_deux_tags %}

{% block content %}
    <div class="col-sm-8">
    {# tag is a queryset of one so we need a for loop to access the tag word #}
    <h2>Browsing by the tag: {% for t in tag %}
        {{ t.word }}
    {% endfor %}</h2>

    {% for post in posts %}
    <div>
        <div>
            <a href="{% url 'blog:detail' post.id %}"><h2 class="blog-post-title">{{ post.title }}</h2></a>
            <p class="blog-post-meta">{{ post.pub_date|date:"F j Y" }} By {{ post.author.first_name}}</p>
        </div>
        <div>
            {{ post.body|markdown|truncatewords:200 }}

            {% if post.body|wordcount >= 200 %}
                <p><a class="btn btn-default" href="{% url 'blog:detail' post.id %}">Read More</a></p>
            {% endif %}
        </div>
        <div>
        {% for tag in post.tags.all %}
            <p><a href="{% url 'blog:by_tag' tag %}">{{ tag }}</a></p>
        {% endfor %}
        </div>
        <hr>
    </div>
    {% endfor %}
    </div>

    {% include "blog/sidebar.html" %}

{% endblock content %}